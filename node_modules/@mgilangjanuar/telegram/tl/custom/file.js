"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.File = void 0;
const api_1 = require("../api");
const Utils_1 = require("../../Utils");
const util_1 = require("util");
const Helpers_1 = require("../../Helpers");
class File {
    constructor(media) {
        this.media = media;
    }
    [util_1.inspect.custom]() {
        return (0, Helpers_1.betterConsoleLog)(this);
    }
    get id() {
        throw new Error("Unsupported");
    }
    get name() {
        return this._fromAttr(api_1.Api.DocumentAttributeFilename, "fileName");
    }
    get mimeType() {
        if (this.media instanceof api_1.Api.Photo) {
            return "image/jpeg";
        }
        else if (this.media instanceof api_1.Api.Document) {
            return this.media.mimeType;
        }
    }
    get width() {
        return this._fromAttr([api_1.Api.DocumentAttributeImageSize, api_1.Api.DocumentAttributeVideo], "w");
    }
    get height() {
        return this._fromAttr([api_1.Api.DocumentAttributeImageSize, api_1.Api.DocumentAttributeVideo], "h");
    }
    get duration() {
        return this._fromAttr([api_1.Api.DocumentAttributeAudio, api_1.Api.DocumentAttributeVideo], "duration");
    }
    get title() {
        return this._fromAttr(api_1.Api.DocumentAttributeAudio, "title");
    }
    get performer() {
        return this._fromAttr(api_1.Api.DocumentAttributeAudio, "performer");
    }
    get emoji() {
        return this._fromAttr(api_1.Api.DocumentAttributeSticker, "alt");
    }
    get stickerSet() {
        return this._fromAttr(api_1.Api.DocumentAttributeSticker, "stickerset");
    }
    get size() {
        if (this.media instanceof api_1.Api.Photo) {
            return (0, Utils_1._photoSizeByteCount)(this.media.sizes[-1]);
        }
        else if (this.media instanceof api_1.Api.Document) {
            return this.media.size;
        }
    }
    _fromAttr(cls, field) {
        if (this.media instanceof api_1.Api.Document) {
            for (const attr of this.media.attributes) {
                if (attr instanceof cls) {
                    return attr[field];
                }
            }
        }
    }
}
exports.File = File;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2dyYW1qcy90bC9jdXN0b20vZmlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxnQ0FBNkI7QUFDN0IsdUNBQWtEO0FBQ2xELCtCQUErQjtBQUMvQiwyQ0FBaUQ7QUFFakQsTUFBYSxJQUFJO0lBTWIsWUFBWSxLQUFlO1FBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3ZCLENBQUM7SUFORCxDQUFDLGNBQU8sQ0FBQyxNQUFNLENBQUM7UUFDWixPQUFPLElBQUEsMEJBQWdCLEVBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQU1ELElBQUksRUFBRTtRQUNGLE1BQU0sSUFBSSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVELElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFHLENBQUMseUJBQXlCLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUVELElBQUksUUFBUTtRQUNSLElBQUksSUFBSSxDQUFDLEtBQUssWUFBWSxTQUFHLENBQUMsS0FBSyxFQUFFO1lBQ2pDLE9BQU8sWUFBWSxDQUFDO1NBQ3ZCO2FBQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxZQUFZLFNBQUcsQ0FBQyxRQUFRLEVBQUU7WUFDM0MsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztTQUM5QjtJQUNMLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQ2pCLENBQUMsU0FBRyxDQUFDLDBCQUEwQixFQUFFLFNBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxFQUM1RCxHQUFHLENBQ04sQ0FBQztJQUNOLENBQUM7SUFFRCxJQUFJLE1BQU07UUFDTixPQUFPLElBQUksQ0FBQyxTQUFTLENBQ2pCLENBQUMsU0FBRyxDQUFDLDBCQUEwQixFQUFFLFNBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxFQUM1RCxHQUFHLENBQ04sQ0FBQztJQUNOLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxTQUFTLENBQ2pCLENBQUMsU0FBRyxDQUFDLHNCQUFzQixFQUFFLFNBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxFQUN4RCxVQUFVLENBQ2IsQ0FBQztJQUNOLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBRyxDQUFDLHNCQUFzQixFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDVCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBRyxDQUFDLHNCQUFzQixFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBRyxDQUFDLHdCQUF3QixFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDVixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBRyxDQUFDLHdCQUF3QixFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDSixJQUFJLElBQUksQ0FBQyxLQUFLLFlBQVksU0FBRyxDQUFDLEtBQUssRUFBRTtZQUNqQyxPQUFPLElBQUEsMkJBQW1CLEVBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BEO2FBQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxZQUFZLFNBQUcsQ0FBQyxRQUFRLEVBQUU7WUFDM0MsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztTQUMxQjtJQUNMLENBQUM7SUFFRCxTQUFTLENBQUMsR0FBUSxFQUFFLEtBQWE7UUFDN0IsSUFBSSxJQUFJLENBQUMsS0FBSyxZQUFZLFNBQUcsQ0FBQyxRQUFRLEVBQUU7WUFDcEMsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRTtnQkFDdEMsSUFBSSxJQUFJLFlBQVksR0FBRyxFQUFFO29CQUNyQixPQUFRLElBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ3RDO2FBQ0o7U0FDSjtJQUNMLENBQUM7Q0FDSjtBQWhGRCxvQkFnRkMifQ==